(this["webpackJsonpstream-line"]=this["webpackJsonpstream-line"]||[]).push([[0],{108:function(e,t){},146:function(e,t,n){},147:function(e,t,n){},152:function(e,t){},153:function(e,t){},162:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(14),s=n.n(r),c=(n(146),n(16)),o=(n(147),n(18)),u=n(6),l=n(62);function d(e){return{Artist:e.Artist,ContentType:e["Content Type"],DeliveryMethod:e["Delivery Method"],Distributor:e.Distributor,ISRC:e.ISRC,Label:e.Label,PeriodFrom:e["Period From"],PeriodTo:e["Period To"],Quantity:e.Quantity,ReleaseTitle:e["Release Title"],Revenue:e.Revenue,SuitebeatsComp:e["Suitebeats Comp."],Territory:e.Territory,TrackTitle:e["Track Title"],UPC:e.UPC}}function h(e,t){var n={};return t.forEach((function(t){!n[t[e]]&&(n[t[e]]=[]),n[t[e]].push(t)})),n}var j=n(50),b=n(9);function f(e){var t=e.onLoad;function n(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length){var i=new FileReader;i.onload=function(t){var i,r=null===(i=t.target)||void 0===i?void 0:i.result;a[e[0].name]=r,n(e.slice(1),a)},i.onerror=function(e){console.log(e)},i.readAsBinaryString(e[0])}else t(a)}return Object(b.jsxs)(j.a,{variant:"contained",component:"label",children:["Upload Files",Object(b.jsx)("input",{type:"file",onChange:function(e){for(var t=[],a=0;a<e.target.files.length;a++)t.push(e.target.files[a]);n(t)},hidden:!0,multiple:!0})]})}var v=n(114);function p(e){var t=e.sheet,n=h("ISRC",t),a=Object.keys(n).map((function(e,t){var a={id:t};return n[e].forEach((function(e){a.title=e.TrackTitle,!a.quantity&&(a.quantity=0),a.quantity+=e.Quantity,!a.revenue&&(a.revenue=0),a.revenue+=e.Revenue,a.artist=e.Artist})),a}));return Object(b.jsx)("div",{style:{height:300,width:"100%"},children:Object(b.jsx)(v.a,{rows:a,columns:[{field:"title",headerName:"Title",width:150},{field:"artist",headerName:"Artist",width:150},{field:"quantity",headerName:"Quantity",width:150},{field:"revenue",headerName:"Revenue",width:150}]})})}var O=n(78),y=n.n(O),g=n(207),x=n(82),m=n(38),S="all";function T(e){var t=e.sheet,n=i.a.useState({}),a=Object(u.a)(n,2),r=a[0],s=a[1],c=i.a.useState([]),o=Object(u.a)(c,2),l=o[0],d=o[1],j=i.a.useState([]),f=Object(u.a)(j,2),v=f[0],p=f[1],O=i.a.useState([]),T=Object(u.a)(O,2),C=T[0],R=T[1],k=i.a.useState(S),E=Object(u.a)(k,2),w=E[0],A=E[1],F=i.a.useState({}),L=Object(u.a)(F,2),P=L[0],I=L[1],Q=i.a.useState("streams"),D=Object(u.a)(Q,2),N=D[0],_=D[1];i.a.useEffect((function(){var e=h("Distributor",t),n=[],a=[];Object.keys(e).forEach((function(t){n.push(t),e[t].forEach((function(e){a.includes(e.Artist)||a.push(e.Artist)}))})),s(e),p(n),R(a)}),[t]),i.a.useEffect((function(){var e=[],t=[];Object.keys(r).forEach((function(n){var a=0,i=0;r[n].forEach((function(e){w!==S&&w!==e.Artist||(a+=e.Revenue,console.log(e.Quantity,parseInt(e.Quantity)),i+=parseInt(e.Quantity))})),e.push(a),t.push(i)})),I({revenue:e,streams:t}),d([{data:t}])}),[w]),i.a.useEffect((function(){P[N]&&d([{data:P[N]}])}),[N,r]);var q={chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:4,horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:v}};return Object(b.jsxs)(g.a,{children:[Object(b.jsxs)(x.a,{value:w,onChange:function(e){return A(e.target.value)},style:{padding:6,margin:6},children:[Object(b.jsx)(m.a,{value:S,children:"All"}),C.map((function(e){return Object(b.jsx)(m.a,{value:e,children:e},e)}))]}),Object(b.jsx)(x.a,{value:N,onChange:function(e){return _(e.target.value)},style:{padding:6,margin:6},children:Object.keys(P).map((function(e){return Object(b.jsx)(m.a,{value:e,children:e},e)}))}),Object(b.jsx)(y.a,{options:q,series:l,type:"bar",height:350})]})}function C(e){var t=function(e){return h("Territory",e)}(e.sheet),n=[],a=[];Object.keys(t).forEach((function(e){n.push(e);var i=t[e].reduce((function(e,t){return e+t.Revenue}),0);a.push(i)}));var i={chart:{type:"donut"},labels:n,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]};return Object(b.jsx)("div",{children:Object(b.jsx)(y.a,{options:i,series:a,type:"donut",height:350})})}function R(){var e=i.a.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(b.jsxs)("div",{style:{padding:25},children:[Object(b.jsx)("div",{style:{padding:25},children:Object(b.jsx)(f,{onLoad:function(e){var t=[];Object.values(e).forEach((function(e){t.push.apply(t,Object(o.a)(function(e){var t=l.read(e,{type:"binary"}),n=t.SheetNames[0],a=t.Sheets[n],i=l.utils.decode_range(a["!ref"]),r=l.utils.sheet_to_csv(a,{RS:"\n"}),s=0;return r.split("\n").some((function(e,t){e.split(",").filter((function(e){return!!e})).length>10&&!s&&(s=t)})),l.utils.sheet_to_json(a,{range:{s:{c:0,r:s},e:i.e}}).map(d)}(e)))})),a(t)}})}),!!n.length&&Object(b.jsxs)("div",{style:{padding:25,border:"solid 1px"},children:["Tracks",Object(b.jsx)("div",{style:{padding:25},children:Object(b.jsx)(p,{sheet:n})}),"Retailers",Object(b.jsx)("div",{style:{padding:25},children:Object(b.jsx)(T,{sheet:n})}),"Locations",Object(b.jsx)("div",{style:{padding:25},children:Object(b.jsx)(C,{sheet:n})})]})]})}var k=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(c.c,{children:Object(b.jsx)(c.a,{exact:!0,path:"/",children:Object(b.jsx)(R,{})})})})},E=n(88),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(E.a,{basename:"/stream-line",children:Object(b.jsx)(k,{})})}),document.getElementById("root")),w()}},[[162,1,2]]]);
//# sourceMappingURL=main.b960648f.chunk.js.map