(this["webpackJsonpstream-line"]=this["webpackJsonpstream-line"]||[]).push([[0],{109:function(e,t){},146:function(e,t,n){},147:function(e,t,n){},152:function(e,t){},153:function(e,t){},162:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),s=n.n(i),c=(n(146),n(17)),u=(n(147),n(16)),o=n(5),l=n(62);function d(e){return{Artist:e.Artist,ContentType:e["Content Type"],DeliveryMethod:e["Delivery Method"],Distributor:e.Distributor,ISRC:e.ISRC,Label:e.Label,PeriodFrom:e["Period From"],PeriodTo:e["Period To"],Quantity:parseInt(e.Quantity),ReleaseTitle:e["Release Title"],Revenue:e.Revenue,SuitebeatsComp:e["Suitebeats Comp."],Territory:e.Territory,TrackTitle:e["Track Title"],UPC:e.UPC}}function h(e,t){var n={};return t.forEach((function(t){!n[t[e]]&&(n[t[e]]=[]),n[t[e]].push(t)})),n}var j=n(50),f=n(9);function b(e){var t=e.onLoad;function n(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length){var r=new FileReader;r.onload=function(t){var r,i=null===(r=t.target)||void 0===r?void 0:r.result;a[e[0].name]=i,n(e.slice(1),a)},r.onerror=function(e){console.log(e)},r.readAsBinaryString(e[0])}else t(a)}return Object(f.jsxs)(j.a,{variant:"contained",component:"label",children:["Upload Files",Object(f.jsx)("input",{type:"file",onChange:function(e){for(var t=[],a=0;a<e.target.files.length;a++)t.push(e.target.files[a]);n(t)},hidden:!0,multiple:!0})]})}var v=n(115);function O(e){var t=e.sheet,n=h("ISRC",t),a=Object.keys(n).map((function(e,t){var a={id:t};return n[e].forEach((function(e){a.title=e.TrackTitle,!a.quantity&&(a.quantity=0),a.quantity+=e.Quantity,!a.revenue&&(a.revenue=0),a.revenue+=e.Revenue,a.artist=e.Artist})),a}));return Object(f.jsx)("div",{style:{height:300,width:"100%"},children:Object(f.jsx)(v.a,{rows:a,columns:[{field:"title",headerName:"Title",width:150},{field:"artist",headerName:"Artist",width:150},{field:"quantity",headerName:"Quantity",width:150},{field:"revenue",headerName:"Revenue",width:150}]})})}var p=n(78),g=n.n(p),y=n(207),x=n(82),m=n(38),S="all",T=["streams","revenue"];function C(e){var t=e.sheet,n=e.onFiltersChanged,a=r.a.useState(""),i=Object(o.a)(a,2),s=i[0],c=i[1],u=r.a.useState(""),l=Object(o.a)(u,2),d=l[0],h=l[1],j=r.a.useState([]),b=Object(o.a)(j,2),v=b[0],O=b[1];return r.a.useEffect((function(){var e=[];t.forEach((function(t){t.Artist&&!e.includes(t.Artist)&&e.push(t.Artist)})),O(e),c(S),h(T[0])}),[t]),r.a.useEffect((function(){n({artist:s,streamOrRevenue:d})}),[d,s,n]),Object(f.jsxs)(y.a,{children:[Object(f.jsxs)(x.a,{value:s,onChange:function(e){return c(e.target.value)},style:{padding:6,margin:6},children:[Object(f.jsx)(m.a,{value:S,children:"All"}),v.map((function(e){return Object(f.jsx)(m.a,{value:e,children:e},e)}))]}),Object(f.jsx)(x.a,{value:d,onChange:function(e){return h(e.target.value)},style:{padding:6,margin:6},children:T.map((function(e){return Object(f.jsx)(m.a,{value:e,children:e},e)}))})]})}function E(e){var t=e.sheet,n=r.a.useState({}),a=Object(o.a)(n,2),i=a[0],s=a[1],c=r.a.useState([]),u=Object(o.a)(c,2),l=u[0],d=u[1],j=r.a.useState([]),b=Object(o.a)(j,2),v=b[0],O=b[1],p=r.a.useState(""),x=Object(o.a)(p,2),m=x[0],T=x[1],E=r.a.useState({}),R=Object(o.a)(E,2),k=R[0],A=R[1],F=r.a.useState(""),w=Object(o.a)(F,2),L=w[0],P=w[1];r.a.useEffect((function(){var e=h("Distributor",t),n=[];Object.keys(e).forEach((function(e){n.push(e)})),s(e),O(n)}),[t]),r.a.useEffect((function(){var e=[],t=[];Object.keys(i).forEach((function(n){var a=0,r=0;i[n].forEach((function(e){m!==S&&m!==e.Artist||(a+=e.Revenue,r+=e.Quantity)})),e.push(a),t.push(r)})),A({revenue:e,streams:t}),d([{data:t}])}),[m,i]),r.a.useEffect((function(){k[L]&&d([{data:k[L]}])}),[L,k]);var D={chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:4,horizontal:!0}},dataLabels:{enabled:!1},xaxis:{categories:v}};return Object(f.jsxs)(y.a,{children:[Object(f.jsx)(C,{sheet:t,onFiltersChanged:function(e){var t=e.artist,n=e.streamOrRevenue;T(t),P(n)}}),Object(f.jsx)(g.a,{options:D,series:l,type:"bar",height:350})]})}function R(e){var t=e.sheet,n=r.a.useState({}),a=Object(o.a)(n,2),i=a[0],s=a[1],c=r.a.useState([]),l=Object(o.a)(c,2),d=l[0],j=l[1],b=r.a.useState(""),v=Object(o.a)(b,2),O=v[0],p=v[1],x=r.a.useState(""),m=Object(o.a)(x,2),T=m[0],E=m[1],R=r.a.useState([]),k=Object(o.a)(R,2),A=k[0],F=k[1],w=r.a.useState({}),L=Object(o.a)(w,2),P=L[0],D=L[1];r.a.useEffect((function(){var e=function(e){return h("Territory",e)}(t);j(Object.keys(e)),s(e)}),[t]),r.a.useEffect((function(){var e=[],t=[];Object.keys(i).forEach((function(n){var a=0,r=0;i[n].forEach((function(e){O!==S&&O!==e.Artist||(a+=e.Revenue,r+=e.Quantity)})),e.push(a),t.push(r)})),D({revenue:e,streams:t})}),[O,i]),r.a.useEffect((function(){P[T]&&F(Object(u.a)(P[T]))}),[T,P]);return Object(f.jsxs)(y.a,{children:[Object(f.jsx)(C,{sheet:t,onFiltersChanged:function(e){var t=e.artist,n=e.streamOrRevenue;p(t),E(n)}}),Object(f.jsx)(g.a,{options:{chart:{type:"donut"},labels:d,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]},series:A,type:"donut",height:350+Math.floor(2*Math.random())+1})]})}function k(){var e=r.a.useState([]),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(f.jsxs)("div",{style:{padding:25},children:[Object(f.jsx)("div",{style:{padding:25},children:Object(f.jsx)(b,{onLoad:function(e){var t=[];Object.values(e).forEach((function(e){t.push.apply(t,Object(u.a)(function(e){var t=l.read(e,{type:"binary"}),n=t.SheetNames[0],a=t.Sheets[n],r=l.utils.decode_range(a["!ref"]),i=l.utils.sheet_to_csv(a,{RS:"\n"}),s=0;return i.split("\n").some((function(e,t){e.split(",").filter((function(e){return!!e})).length>10&&!s&&(s=t)})),l.utils.sheet_to_json(a,{range:{s:{c:0,r:s},e:r.e}}).map(d)}(e)))})),a(t)}})}),!!n.length&&Object(f.jsxs)("div",{style:{padding:25,border:"solid 1px"},children:["Tracks",Object(f.jsx)("div",{style:{padding:25},children:Object(f.jsx)(O,{sheet:n})}),"Retailers",Object(f.jsx)("div",{style:{padding:25},children:Object(f.jsx)(E,{sheet:n})}),"Locations",Object(f.jsx)("div",{style:{padding:25},children:Object(f.jsx)(R,{sheet:n})})]})]})}var A=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(c.c,{children:Object(f.jsx)(c.a,{exact:!0,path:"/",children:Object(f.jsx)(k,{})})})})},F=n(89),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(F.a,{basename:"/stream-line",children:Object(f.jsx)(A,{})})}),document.getElementById("root")),w()}},[[162,1,2]]]);
//# sourceMappingURL=main.b04801e1.chunk.js.map